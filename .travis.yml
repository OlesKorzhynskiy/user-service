sudo: required
language: generic

services:
  - docker

branches:
  only:
  - master
  - korzhynskiy

after_success:
  # Create images
  - docker build -t korzhynskiy/user-service-consumer -f ./UserService.Consumer/Dockerfile .
  - docker build -t korzhynskiy/user-service-api -f ./UserService.API/Dockerfile .
  # Log in to the docker CLI
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin
  # Take those images and push them to Docker Hub
  - docker push korzhynskiy/user-service-consumer
  - docker push korzhynskiy/user-service-api